@startuml diagrama_componentes_ulstorage

!define COMPONENT component
!define INTERFACE interface
!define DATABASE database

title **ğŸ—ï¸ DIAGRAMA DE COMPONENTES - SISTEMA ULSTORAGE**\n//Arquitectura del Sistema de Almacenamiento en la Nube//

skinparam componentStyle rectangle
skinparam component {
    BackgroundColor #E8F4FD
    BorderColor #2E86AB
    ArrowColor #A23B72
}

skinparam interface {
    BackgroundColor #FFF3CD
    BorderColor #856404
}

skinparam database {
    BackgroundColor #D1ECF1
    BorderColor #0C5460
}

' ===============================
' CAPA DE PRESENTACIÃ“N (FRONTEND)
' ===============================
package "ğŸ–¥ï¸ FRONTEND - REACT" as frontend {
    COMPONENT [ğŸ” Login Component] as login_ui
    COMPONENT [ğŸ“Š Dashboard Component] as dashboard_ui
    COMPONENT [ğŸ“ File Manager Component] as filemanager_ui
    COMPONENT [ğŸ“‹ File Upload Component] as upload_ui
    COMPONENT [ğŸ·ï¸ Tag Manager Component] as tag_ui
    COMPONENT [ğŸ‘¥ Share Manager Component] as share_ui
    
    INTERFACE "Auth API" as auth_api
    INTERFACE "Files API" as files_api
    INTERFACE "Folders API" as folders_api
    INTERFACE "Tags API" as tags_api
    INTERFACE "Share API" as share_api
}

' ===============================
' CAPA DE SERVICIOS (BACKEND API)
' ===============================
package "ğŸ”§ BACKEND - NODE.JS/EXPRESS" as backend {
    
    ' Controladores
    package "ğŸ® CONTROLLERS" as controllers {
        COMPONENT [ğŸ” AuthController] as auth_controller
        COMPONENT [ğŸ“„ FileController] as file_controller
        COMPONENT [ğŸ“ FolderController] as folder_controller
        COMPONENT [ğŸ·ï¸ TagController] as tag_controller
        COMPONENT [ğŸ‘¥ ShareController] as share_controller
        COMPONENT [ğŸ“Š LogController] as log_controller
    }
    
    ' Servicios de Negocio
    package "ğŸ’¼ SERVICES" as services {
        COMPONENT [ğŸ” AuthService] as auth_service
        COMPONENT [ğŸ“„ GestorArchivos] as file_manager
        COMPONENT [ğŸ“ GestorCarpetas] as folder_manager
        COMPONENT [ğŸ·ï¸ EtiquetaService] as tag_service
        COMPONENT [ğŸ‘¥ CompartirService] as share_service
        COMPONENT [ğŸ“Š ActivityLogService] as log_service
        COMPONENT [ğŸ”„ VersionFactory] as version_factory
    }
    
    ' Middleware
    package "ğŸ›¡ï¸ MIDDLEWARE" as middleware {
        COMPONENT [ğŸ” JWT Auth Middleware] as jwt_middleware
        COMPONENT [âœ… Validation Middleware] as validation_middleware
        COMPONENT [ğŸ“ Logger Middleware] as logger_middleware
        COMPONENT [ğŸš« CORS Middleware] as cors_middleware
    }
}

' ===============================
' CAPA DE DATOS (REPOSITORIES)
' ===============================
package "ğŸ—„ï¸ DATA ACCESS LAYER" as data_layer {
    
    package "ğŸ“š REPOSITORIES" as repositories {
        COMPONENT [ğŸ‘¤ UserRepository] as user_repo
        COMPONENT [ğŸ“„ FileRepository] as file_repo
        COMPONENT [ğŸ“ FolderRepository] as folder_repo
        COMPONENT [ğŸ·ï¸ TagRepository] as tag_repo
        COMPONENT [ğŸ‘¥ ShareRepository] as share_repo
        COMPONENT [ğŸ“Š LogRepository] as log_repo
    }
    
    package "ğŸ”„ ORM - SEQUELIZE" as orm {
        COMPONENT [ğŸ‘¤ User Model] as user_model
        COMPONENT [ğŸ“„ File Model] as file_model
        COMPONENT [ğŸ“ Folder Model] as folder_model
        COMPONENT [ğŸ·ï¸ Tag Model] as tag_model
        COMPONENT [ğŸ‘¥ Permission Model] as permission_model
        COMPONENT [ğŸ“‹ Version Model] as version_model
        COMPONENT [ğŸ“Š ActivityLog Model] as log_model
    }
}

' ===============================
' CAPA DE ALMACENAMIENTO EN LA NUBE
' ===============================
package "â˜ï¸ CLOUD STORAGE PROVIDERS" as cloud_storage {
    
    package "ğŸ”„ STRATEGY PATTERN" as storage_strategy {
        INTERFACE "IProveedorAlmacenamiento" as storage_interface
        COMPONENT [ğŸ…¾ï¸ OCI Storage] as oci_storage
        COMPONENT [ğŸ”¶ AWS S3 Storage] as aws_storage
        COMPONENT [ğŸ”µ GCP Storage] as gcp_storage
        COMPONENT [ğŸ­ ProveedorFactory] as provider_factory
    }
    
    package "ğŸ“¡ EXTERNAL APIS" as external_apis {
        DATABASE "â˜ï¸ Oracle Cloud\nInfrastructure" as oci_api
        DATABASE "â˜ï¸ Amazon Web\nServices S3" as aws_api
        DATABASE "â˜ï¸ Google Cloud\nPlatform" as gcp_api
    }
}

' ===============================
' BASE DE DATOS
' ===============================
package "ğŸ—ƒï¸ DATABASE TIER" as database_tier {
    DATABASE "ğŸ˜ PostgreSQL\nDatabase" as postgres_db {
        [ğŸ‘¤ users]
        [ğŸ“ carpetas]
        [ğŸ“„ archivos]
        [ğŸ“‹ versiones]
        [ğŸ·ï¸ etiquetas]
        [ğŸ”— archivo_etiquetas]
        [ğŸ” permisos]
        [ğŸ“Š activity_logs]
    }
}

' ===============================
' SISTEMAS EXTERNOS
' ===============================
package "ğŸŒ EXTERNAL SYSTEMS" as external_systems {
    COMPONENT [ğŸ“§ Email Service] as email_service
    COMPONENT [ğŸ”” Notification Service] as notification_service
    COMPONENT [ğŸ“Š Analytics Service] as analytics_service
}

' ===============================
' RELACIONES ENTRE COMPONENTES
' ===============================

' Frontend â†’ Backend APIs
login_ui --> auth_api
dashboard_ui --> files_api
filemanager_ui --> files_api
filemanager_ui --> folders_api
upload_ui --> files_api
tag_ui --> tags_api
share_ui --> share_api

' APIs â†’ Controllers
auth_api --> auth_controller
files_api --> file_controller
folders_api --> folder_controller
tags_api --> tag_controller
share_api --> share_controller

' Controllers â†’ Middleware
auth_controller --> jwt_middleware
file_controller --> jwt_middleware
folder_controller --> jwt_middleware
tag_controller --> jwt_middleware
share_controller --> jwt_middleware

auth_controller --> validation_middleware
file_controller --> validation_middleware
folder_controller --> validation_middleware

' Controllers â†’ Services
auth_controller --> auth_service
file_controller --> file_manager
folder_controller --> folder_manager
tag_controller --> tag_service
share_controller --> share_service
file_controller --> log_service

' Services â†’ Repositories
auth_service --> user_repo
file_manager --> file_repo
folder_manager --> folder_repo
tag_service --> tag_repo
share_service --> share_repo
log_service --> log_repo

' Services â†’ Storage Strategy
file_manager --> provider_factory
file_manager --> storage_interface

' Storage Strategy â†’ Cloud Providers
storage_interface <|.. oci_storage
storage_interface <|.. aws_storage
storage_interface <|.. gcp_storage
provider_factory --> oci_storage
provider_factory --> aws_storage
provider_factory --> gcp_storage

' Cloud Providers â†’ External APIs
oci_storage --> oci_api
aws_storage --> aws_api
gcp_storage --> gcp_api

' Repositories â†’ ORM Models
user_repo --> user_model
file_repo --> file_model
folder_repo --> folder_model
tag_repo --> tag_model
share_repo --> permission_model
log_repo --> log_model

' ORM â†’ Database
user_model --> postgres_db
file_model --> postgres_db
folder_model --> postgres_db
tag_model --> postgres_db
permission_model --> postgres_db
version_model --> postgres_db
log_model --> postgres_db

' Services â†’ External Systems
auth_service --> email_service
share_service --> notification_service
log_service --> analytics_service

' Special Relations
file_manager --> version_factory
version_factory --> version_model

' ===============================
' NOTAS ARQUITECTÃ“NICAS
' ===============================
note top of frontend : **FRONTEND SPA**\nReact + Vite + Tailwind CSS\nComponentes modulares con hooks
note top of controllers : **API REST**\nControladores que manejan\nHTTP requests/responses
note top of services : **LÃ“GICA DE NEGOCIO**\nImplementa patrones Strategy,\nFactory y Facade del UML
note top of storage_strategy : **PATRÃ“N STRATEGY**\nAbstracciÃ³n para mÃºltiples\nproveedores de nube
note top of postgres_db : **BASE DE DATOS**\nPostgreSQL con Sequelize ORM\nEstructura del diagrama ER

' ===============================
' LEYENDA DE COMPONENTES
' ===============================
legend bottom left
|= SÃ­mbolo |= Significado |
|ğŸ”| AutenticaciÃ³n y Seguridad |
|ğŸ“„| GestiÃ³n de Archivos |
|ğŸ“| GestiÃ³n de Carpetas |
|ğŸ·ï¸| Sistema de Etiquetas |
|ğŸ‘¥| Compartir y Permisos |
|ğŸ“Š| Logs y AuditorÃ­a |
|â˜ï¸| Almacenamiento en la Nube |
|ğŸ”„| Patrones de DiseÃ±o |

**ğŸ—ï¸ Arquitectura:**
â€¢ **N-Capas**: PresentaciÃ³n â†’ API â†’ Servicios â†’ Datos
â€¢ **Patrones**: Strategy, Factory, Facade, Repository
â€¢ **TecnologÃ­as**: React, Node.js, Express, Sequelize, PostgreSQL
â€¢ **Cloud**: OCI, AWS, GCP con abstracciÃ³n de proveedores
endlegend

@enduml