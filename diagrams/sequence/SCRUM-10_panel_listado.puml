@startuml SCRUM-10_PanelListado
title SCRUM-10: Ver panel principal (listado) con delegación a GestorArchivos

actor Usuario
participant "Plataforma web" as Frontend
participant "Backend / API" as Backend
participant "GestorArchivos (Facade)" as Gestor
participant "BuscadorService / Storage" as Buscador

Usuario -> Frontend: 1. Abrir panel principal
activate Usuario
activate Frontend
Frontend -> Backend: 2. GET /storage/:provider/list?path=/current
activate Backend
Backend -> Gestor: 3. listarArchivos(carpeta)
activate Gestor
Gestor -> Buscador: 4. listar/consultar metadatos (prefetch/search_vector)
activate Buscador
Buscador --> Gestor: 5. Lista de objetos (metadatos, urls)
deactivate Buscador
Gestor --> Backend: 6. Lista de objetos
deactivate Gestor
Backend --> Frontend: 7. 200 OK {data}
deactivate Backend
Frontend -> Usuario: 8. Renderizar lista y árbol de carpetas
deactivate Frontend
deactivate Usuario
@enduml
